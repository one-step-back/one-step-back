<header th:fragment="header" class="header">
    <div class="header__container">

        <button class="header__toggle-btn" id="menu-toggle" aria-label="메뉴 열기">
            <i class="fas fa-bars"></i>
        </button>

        <a class="header__logo" href="/">
            <img class="header__logo-img" src="/images/header-logo.png" alt="ONE STEP">
        </a>

        <nav class="header__nav" id="header-nav">
            <ul class="header__menu">
                <li class="header__menu-item"><a class="header__link" href="/artist/list">아티스트</a></li>
                <li class="header__menu-item"><a class="header__link" href="/funding/list">펀딩</a></li>
            </ul>
        </nav>

        <div class="header__actions">
            <th:block th:if="${session.member == null}">
                <a class="button button--secondary" href="/member/login">로그인</a>
                <a class="button button--primary" href="/member/join">회원가입</a>
            </th:block>

            <th:block th:unless="${session.member == null}">
                <div class="header__user-wrapper">
                    <button class="header__user" id="user-menu-toggle" aria-label="사용자 메뉴">
                        <img class="header__user-avatar" th:src="${@fileUrlSigner.sign(session.member.profilePath)}" alt="User">
                        <span class="notification-badge" id="notification-badge" style="display: none;">0</span>
                    </button>

                    <div class="header__user-dropdown" id="user-dropdown">
                        <div class="header__user-info">
                            <span class="header__user-name" th:text="${session.member.memberNickname}">닉네임</span>
                            <span class="header__user-email">님 환영합니다.</span>
                        </div>

                        <div class="header__notification-section">
                            <div class="notification-header-tiny">최신 알림</div>
                            <ul class="notification-list" id="notification-list">
                                <li class="empty-message">새로운 알림이 없습니다.</li>
                            </ul>
                        </div>

                        <div class="header__divider"></div>

                        <a class="header__dropdown-item" href="/my-page">
                            <i class="fas fa-user"></i> 마이페이지
                        </a>

                        <th:block th:if="${session.member.artist}">
                            <a class="header__dropdown-item" th:href="@{/artist/{id}(id=${session.member.id})}">
                                <i class="fas fa-music"></i> 내 채널
                            </a>
                            <a class="header__dropdown-item" th:href="@{/artist/dashboard}">
                                <i class="fas fa-tachometer-alt"></i> 아티스트 대시보드
                            </a>
                            <a class="header__dropdown-item" th:href="@{/artist/{id}/funding(id=${session.member.id})}">
                                <i class="fas fa-hand-holding-usd"></i> 내 크라우드 펀딩
                            </a>
                        </th:block>

                        <div class="header__divider"></div>

                        <a class="header__dropdown-item" href="/inquiry/write">
                            <i class="fas fa-question-circle"></i> 문의하기
                        </a>
                        <a class="header__dropdown-item header__dropdown-item--danger" href="/member/logout">
                            <i class="fas fa-sign-out-alt"></i> 로그아웃
                        </a>
                    </div>
                </div>
            </th:block>

        </div>
    </div>
</header>