import{j as r}from"./util/alert.min.js";import{t as c}from"./util/timeUtil.min.js";r(()=>{r.ajax({url:"/api/v1/main",type:"GET",success:t=>{const s=t.data;s&&(l(s.risingArtists),o(s.fundings),d(s.feeds))},error:t=>{console.error("메인 데이터 로드 실패",t)}});function l(t){const s=r("#rising-artist-list");if(!t||!t.length){s.html(`
                <div class="no-data-container">
                    <i class="fas fa-user-slash no-data-icon"></i>
                    <p class="no-data-text">아직 등록된 아티스트가 없습니다.</p>
                </div>
            `);return}let i="";t.forEach(a=>{const e=a.profilePath||"/images/default-profile.png",n=a.followerCount>999?(a.followerCount/1e3).toFixed(1)+"K":a.followerCount;i+=`
                <a href="/artist/${a.id}" class="artist-card-v2">
                    <img src="${e}" class="artist-avatar-large" alt="${a.name}">
                    <h3 class="artist-name">${a.name}</h3>
                    <p class="artist-tags">${a.description||"소개글이 없습니다."}</p>
                    <div class="btn-follow-sm">팔로우 ${n}</div>
                </a>
            `}),s.html(i)}function o(t){const s=r("#spotlight-funding-list");if(!t||!t.length){s.html(`
                <div class="no-data-container">
                    <i class="fas fa-search-dollar no-data-icon"></i>
                    <p class="no-data-text">진행 중인 펀딩 프로젝트가 없습니다.</p>
                </div>
            `);return}let i="";t.forEach(a=>{const e=Math.min(a.achieveRate,100),n=a.thumbnailPath||"/images/no-image.png";i+=`
                <a href="/artist/${a.artistId}/funding/${a.id}" class="funding-card-v2">
                    <div class="funding-thumb-v2" style="background-image: url('${n}')">
                        <span class="funding-badge-dday">D-${a.daysLeft}</span>
                    </div>
                    <div class="funding-body">
                        <span class="funding-artist-name">${a.artistName}</span>
                        <h3 class="funding-title-v2">${a.title}</h3>
                        <div class="funding-progress-area">
                            <div class="progress-info"><span>${a.achieveRate}% 달성</span></div>
                            <div class="progress-bar-bg"><div class="progress-bar-fill" style="width: ${e}%"></div></div>
                        </div>
                    </div>
                </a>
            `}),s.html(i)}function d(t){const s=r("#live-feed-list");if(!t||!t.length){s.html(`
                <div class="no-data-container">
                    <i class="far fa-comment-dots no-data-icon"></i>
                    <p class="no-data-text">최근 게시된 피드가 없습니다.</p>
                </div>
            `);return}let i="";t.forEach(a=>{const e=c(a.writeTime),n=a.artistProfilePath||"/images/default-profile.png";i+=`
                <a href="/artist/${a.artistId}/feed/view?id=${a.id}" class="feed-mini-card">
                    <div class="feed-mini-header">
                        <img src="${n}" class="feed-avatar-xs" alt="프로필">
                        <span class="feed-mini-artist">${a.artistName}</span>
                    </div>
                    <p class="feed-mini-text">${a.contentPreview}</p>
                    <span class="feed-mini-meta">${e}</span>
                </a>
            `}),s.html(i)}});
