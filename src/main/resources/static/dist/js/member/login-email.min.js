import{j as t}from"../util/alert.min.js";import{S as n}from"../util/toast.min.js";t(()=>{const i=t("#loginForm"),l=t("#email"),a=t("#password"),m=()=>{const e=l.val(),r=a.val();return e.trim()?r.trim()?!0:(n.error("비밀번호를 입력해주세요."),a.trigger("focus"),!1):(n.error("이메일을 입력해주세요."),l.trigger("focus"),!1)},u=(e,r,s)=>{e.addClass("field-error-border"),r.length&&r.text(s).addClass("field-error")},d=e=>{if(e.code==="VAL-001"){const r=/\[(.*?): (.*?)\]/g;let s,o=null;for(;(s=r.exec(e.message))!==null;){const f=s[1],p=s[2],c=t("#"+f),g=t("#"+f+"-msg");c.length&&(u(c,g,p),o||(o=c))}o&&o.focus()}else n.error(e.message),(e.code==="MEM-003"||e.code==="LOGIN_FAILED")&&(a.val("").focus(),i.addClass("shake"),setTimeout(()=>i.removeClass("shake"),500))};i.on("submit",e=>{if(e.preventDefault(),!m())return;const r={email:l.val(),password:a.val()};t.ajax({url:"/api/v1/members/login",type:"POST",data:JSON.stringify(r),contentType:"application/json; charset=utf-8",dataType:"json",success:()=>{window.location.href="/"},error:s=>{const o=s.responseJSON;o&&o.error?d(o.error):(console.error("Login Error:",s),n.error("서버 통신 중 알 수 없는 오류가 발생했습니다."))}})})});
