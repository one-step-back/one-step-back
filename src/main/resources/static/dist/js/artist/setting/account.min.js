import{j as t}from"../../util/alert.min.js";import{S as l}from"../../util/toast.min.js";import{C as x}from"../../util/confirm.min.js";let i,o,n,u,r,d,p;const T=e=>{r.val(e.bankCode),d.val(e.accountNumber),p.val(e.accountHolder)},c=e=>{e==="LOCKED"?(i.prop("disabled",!0),o.hide(),n.show(),u.fadeIn()):(i.prop("disabled",!1),o.text("계좌 실명 인증 및 저장").prop("disabled",!1).show(),n.hide(),u.hide())},h=()=>{t.ajax({url:"/api/v1/accounts",type:"GET",success:e=>{const a=e.data;a&&a.accountNumber?(T(a),c("LOCKED")):c("EDIT")},error:e=>{console.error("계좌 정보 로드 실패",e),c("EDIT")}})};function k(){i=t("#tab-account input, #tab-account select"),o=t("#btn-verify-save"),n=t("#btn-edit-account"),u=t("#account-verified-badge"),r=t("#acc-bank"),d=t("#acc-number"),p=t("#acc-holder"),o.on("click",()=>{const e=r.val(),a=d.val(),b=p.val();if(!e||!a||!b){l.error("은행, 계좌번호, 예금주를 모두 입력해주세요.");return}const f=o.text();o.text("인증 진행 중...").prop("disabled",!0);const m={bankCode:e,accountNumber:a,accountHolder:b};t.ajax({url:"/api/v1/accounts",type:"POST",contentType:"application/json",data:JSON.stringify(m),success:s=>{l.success(s.data||"계좌가 성공적으로 인증 및 저장되었습니다."),c("LOCKED")},error:s=>{const v=s.responseJSON?.error?.message||"오류가 발생했습니다.";l.error("인증 실패: "+v),o.text(f).prop("disabled",!1)}})}),n.on("click",()=>{x.open({title:"계좌 정보 수정",desc:"계좌 정보를 수정하시겠습니까? 수정 시 실명 인증을 다시 진행해야 합니다.",actionText:"수정하기",onConfirm:()=>{c("EDIT"),r.trigger("focus")}})})}export{k as i,h as l};
