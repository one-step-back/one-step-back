import{j as i}from"../util/alert.min.js";i(()=>{const r=location.pathname.split("/")[2];i.ajax({url:`/api/v1/artists/${r}/home`,type:"GET",success:e=>{e.success&&e.data?d(e.data):console.error("아티스트 홈 데이터를 불러오지 못했습니다.")},error:(e,s,a)=>{console.error("API Error:",a)}});function d(e){h(e.funding),m(e.feeds),p(e.memberships)}function h(e){const s=i("#funding-highlight-container"),a=i("#funding-highlight-section"),c=i("#link-to-funding");if(e){const n=`
                <a href="/artist/${r}/funding/${e.id}" class="funding-highlight-card">
                    <div class="funding-thumb" style="background-image: url('${e.mainImgPath}')"></div>
                    <div class="funding-info">
                        <span class="funding-badge">진행 중인 펀딩</span>
                        <h3 class="funding-title">${e.title}</h3>
                        <div class="funding-stats">
                            <span class="achieve-rate">${e.achieveRate}% 달성</span>
                            <span class="days-left">D-${e.daysLeft}</span>
                        </div>
                    </div>
                </a>
            `;s.html(n),c.attr("href",`/artist/${r}/funding`),a.show()}else{const n=`
                <div class="funding-request-banner">
                    <div class="banner-content">
                        <i class="fas fa-bullhorn banner-icon"></i>
                        <div class="banner-text">
                            <h3>진행 중인 프로젝트가 없습니다.</h3>
                            <p>아티스트에게 기가 막힌 펀딩 아이디어를 직접 제안해보세요!</p>
                        </div>
                    </div>
                    <a href="${r}/funding/write" class="btn-request-funding">펀딩 제안하기</a>
                </div>
            `;s.html(n),c.hide(),a.show()}}function m(e){const s=i("#recent-feeds-container"),a=i("#recent-feeds-section"),c=i("#link-to-feed");if(e&&e.length>0){let n="";e.forEach(t=>{const l=t.minTier>0?"tier-paid":"tier-free",f=t.minTier>0?`Tier ${t.minTier} 전용`:"전체 공개";let o;Array.isArray(t.writeTime)?o=new Date(t.writeTime[0],t.writeTime[1]-1,t.writeTime[2]):o=new Date(t.writeTime);const g=o.toLocaleDateString("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit"}).replace(/\./g,".");n+=`
                    <a href="/artist/${r}/feed/${t.id}" class="feed-card">
                        <span class="feed-tier-badge ${l}">${f}</span>
                        <h4 class="feed-title">${t.title}</h4>
                        <p class="feed-preview">${t.contentPreview}</p>
                        <div class="feed-meta">
                            <span>${g}</span>
                            <span><i class="fas fa-heart"></i> ${t.likeCount} &nbsp; <i class="fas fa-comment"></i> ${t.replyCount}</span>
                        </div>
                    </a>
                `}),s.html(n),c.attr("href",`/artist/${r}/feed`),s.removeClass("empty-feed-grid")}else s.html(`
                <div class="feed-empty-state">
                    <i class="far fa-newspaper"></i>
                    <p>아직 등록된 피드가 없습니다.</p>
                </div>
            `),s.addClass("empty-feed-grid"),c.hide();a.show()}function p(e){const s=i("#membership-container"),a=i("#membership-section"),c=i("#link-to-membership");if(e&&e.length>0){let n="";e.forEach(t=>{const l=Number(t.price).toLocaleString();n+=`
                    <div class="membership-card">
                        <h4 class="membership-name">${t.name}</h4>
                        <div class="membership-price">₩${l} <span style="font-size:14px; color:#94a3b8; font-weight:600;">/ 월</span></div>
                        <p class="membership-desc">${t.description}</p>
                    </div>
                `}),s.html(n),c.attr("href",`/artist/${r}/membership`),a.show()}else a.hide()}});
