import{j as i}from"../../util/alert.min.js";import{S as o}from"../../util/toast.min.js";function C(){i(document).off("click",".btn-like").on("click",".btn-like",function(){const e=i(this),a=e.find(".icon-heart"),t=e.find(".like-count"),c=e.data("feed-id");if(!i("body").data("member-id")){o.error("로그인이 필요한 서비스입니다.");return}const d=e.hasClass("active"),s=parseInt(t.text().replace(/,/g,""),10)||0,r=!d;r?(e.addClass("active"),a.removeClass("far").addClass("fas"),t.text((s+1).toLocaleString()),n(e),o.success("이 피드를 좋아합니다!")):(e.removeClass("active"),a.removeClass("fas").addClass("far"),t.text((s-1).toLocaleString()),o.info("좋아요를 취소했습니다.")),i.ajax({url:`/api/v1/feeds/like?feed-id=${c}&status=${r}`,type:"POST",error:()=>{o.error("처리에 실패했습니다."),r?(e.removeClass("active"),a.removeClass("fas").addClass("far"),t.text(s.toLocaleString())):(e.addClass("active"),a.removeClass("far").addClass("fas"),t.text(s.toLocaleString()))}})});function n(e){e.addClass("artist-btn--animate"),setTimeout(()=>{e.removeClass("artist-btn--animate")},800)}}export{C as i};
