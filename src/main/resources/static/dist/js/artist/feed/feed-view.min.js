import{j as t}from"../../util/alert.min.js";import{S as p}from"../../util/toast.min.js";import{C as k}from"../../util/confirm.min.js";import{i as x}from"./feed-like.min.js";import{i as g}from"./feed-reply.min.js";import"../../util/timeUtil.min.js";import"../../../_commonjsHelpers.min.js";t(()=>{t(".btn-subscribe-req").on("click",function(n){n.stopPropagation(),n.preventDefault();const s=t(this).data("url");s&&(location.href=s)});const o=t(".slider-track");let r=t(".slide-item");const a=r.length;if(a>1){const n=r.first().clone(),s=r.last().clone();o.append(n),o.prepend(s),r=t(".slide-item");const i=r.length;let e=1;const d=t(".current-idx"),u=t(".prev-btn"),$=t(".next-btn");let c=!1;const m=300;o.css({transform:`translateX(-${e*100}%)`,transition:"none"});const f=h=>{if(c)return;c=!0,e=h,o.css("transition",`transform ${m}ms ease-in-out`),o.css("transform",`translateX(-${e*100}%)`),t("video").each(function(){this.pause()});let l=e;e===0&&(l=a),e===i-1&&(l=1),d.text(l),setTimeout(()=>{e===i-1&&(e=1,o.css("transition","none"),o.css("transform",`translateX(-${e*100}%)`)),e===0&&(e=a,o.css("transition","none"),o.css("transform",`translateX(-${e*100}%)`)),c=!1},m)};u.on("click",()=>f(e-1)),$.on("click",()=>f(e+1))}t("#btn-feed-more").on("click",function(n){n.stopPropagation(),t(this).closest(".more-menu-wrapper").toggleClass("active")}),t(document).on("click",()=>{t(".more-menu-wrapper").removeClass("active")}),t(".dropdown-menu").on("click",n=>{n.stopPropagation()}),t(".btn-delete").on("click",function(){const n=t(this).data("feed-id"),s=t("#feed-main-container").data("artist-id");k.open({title:"게시글 삭제",desc:"정말 이 게시글을 삭제하시겠습니까?",actionText:"삭제",onConfirm:()=>{t.ajax({url:`/api/v1/feeds/${n}`,type:"DELETE",success:()=>{p.success("게시글이 삭제되었습니다."),setTimeout(()=>location.href=`/artist/${s}/feed`,1e3)},error:i=>{p.error("삭제 실패: "+(i.responseText||"권한이 없습니다."))}})}})}),x(),g()});
